# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: Connection Refused –Ω–∞ VPN –°–µ—Ä–≤–µ—Ä–µ

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞:** `dial tcp 89.125.1.107:39829: connect: connection refused`

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª–∏–µ–Ω—Ç –ø—ã—Ç–∞–ª—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ VPN —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ `outbound/direct[direct]` (–Ω–∞–ø—Ä—è–º—É—é) –∏–∑-–∑–∞ split tunneling. –ù–æ —ç—Ç–æ —Å–∞–º VPN —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ proxy!

**–õ–æ–≥–∏ –∫–ª–∏–µ–Ω—Ç–∞:**
```
ERROR connection: open connection to 89.125.1.107:39829 using outbound/direct[direct]: 
dial tcp 89.125.1.107:39829: connect: connection refused
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

**–î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ routing:** VPN —Å–µ—Ä–≤–µ—Ä (89.125.1.107) –≤—Å–µ–≥–¥–∞ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ proxy, –∞ –Ω–µ –Ω–∞–ø—Ä—è–º—É—é.

```json
{
  "type": "field",
  "ip": ["89.125.1.107/32"],
  "outboundTag": "proxy"
}
```

**–≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞ –ø—Ä–∞–≤–∏–ª**, —á—Ç–æ–±—ã –æ–Ω–æ –∏–º–µ–ª–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –ø—Ä–∞–≤–∏–ª–æ–º –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤.

---

## üîß –ß—Ç–æ –°–¥–µ–ª–∞–Ω–æ

1. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è VPN —Å–µ—Ä–≤–µ—Ä–∞** ‚úÖ
   - IP: `89.125.1.107/32` ‚Üí `proxy`
   - –ü—Ä–∞–≤–∏–ª–æ –≤ –Ω–∞—á–∞–ª–µ —Å–ø–∏—Å–∫–∞ (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

2. **–î–æ–±–∞–≤–ª–µ–Ω outbound proxy** ‚úÖ
   - –ï—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª, —Å–æ–∑–¥–∞–Ω `proxy` outbound

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞** ‚úÖ
   - `Configuration OK`

4. **Xray –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω** ‚úÖ
   - –ü–æ—Ä—Ç 39829 —Å–ª—É—à–∞–µ—Ç—Å—è

---

## üìã –¢–µ–∫—É—â–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Routing

**–ü–æ—Ä—è–¥–æ–∫ –ø—Ä–∞–≤–∏–ª (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):**

1. **VPN —Å–µ—Ä–≤–µ—Ä (89.125.1.107)** ‚Üí `proxy` ‚úÖ
   - –í—Å–µ–≥–¥–∞ —á–µ—Ä–µ–∑ VPN, –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ —Ä–æ—Å—Å–∏–π—Å–∫–∏–π IP

2. **–†–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã** ‚Üí `direct`
   - –ë–∞–Ω–∫–∏, –≥–æ—Å—É—Å–ª—É–≥–∏, –Ø–Ω–¥–µ–∫—Å –∏ —Ç.–¥.

3. **–û—Å—Ç–∞–ª—å–Ω–æ–µ** ‚Üí `proxy`
   - –ß–µ—Ä–µ–∑ VPN

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ê**

- ‚úÖ VPN —Å–µ—Ä–≤–µ—Ä –≤—Å–µ–≥–¥–∞ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ proxy
- ‚úÖ –ö–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- ‚úÖ Split tunneling —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Xray —Ä–∞–±–æ—Ç–∞–µ—Ç (–ø–æ—Ä—Ç 39829)

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

**–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:**

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è VPN –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å:
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ 89.125.1.107:39829 —á–µ—Ä–µ–∑ proxy
- ‚úÖ –†–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é
- ‚úÖ –û—Å—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —á–µ—Ä–µ–∑ VPN

**–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
# –°—Ç–∞—Ç—É—Å
systemctl status xray

# –ü–æ—Ä—Ç
ss -tlnp | grep 39829

# Routing rules
cat /usr/local/etc/xray/config.json | jq '.routing.rules[0]'
```

---

## üìù –§–∞–π–ª—ã

**–ë—ç–∫–∞–ø:**
- `/usr/local/etc/xray/config.json.backup_fix_vpn_server_*`

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `/usr/local/etc/xray/config.json` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ü—Ä–æ–±–ª–µ–º–∞:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ê**

VPN —Å–µ—Ä–≤–µ—Ä —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ proxy, –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è! üöÄ

