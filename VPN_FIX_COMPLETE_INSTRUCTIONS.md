# ‚úÖ –ü–æ–ª–Ω–æ–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VPN - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## üéØ –°—Ç–∞—Ç—É—Å

**–°–µ—Ä–≤–µ—Ä:** ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏ –≤–∞–ª–∏–¥–Ω–∞
**Routing rules:** ‚úÖ –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è 89.125.1.107 ‚Üí proxy –¥–æ–±–∞–≤–ª–µ–Ω–æ
**–ü—Ä–æ–±–ª–µ–º–∞:** ‚ö†Ô∏è –ü—Ä–æ—Ü–µ—Å—Å x-ui –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—Ç—ã

---

## üîß –®–ê–ì 1: –û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –ü–æ—Ä—Ç–æ–≤ –Ω–∞ –°–µ—Ä–≤–µ—Ä–µ

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
ssh root@89.125.1.107

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å x-ui
systemctl stop x-ui
systemctl disable x-ui

# –£–±–∏—Ç—å –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã xray
killall -9 xray xray-linux-amd64 2>/dev/null || true
pkill -9 -f xray-linux-amd64 2>/dev/null || true
pkill -9 -f 'x-ui' 2>/dev/null || true

# –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç—ã
lsof -ti:39829 | xargs kill -9 2>/dev/null || true
lsof -ti:62789 | xargs kill -9 2>/dev/null || true

# –ü–æ–¥–æ–∂–¥–∞—Ç—å
sleep 3

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã
ss -tlnp | grep -E '39829|62789'
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –Ω–∏—á–µ–≥–æ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

echo "‚úÖ –ü–æ—Ä—Ç—ã –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω—ã"
```

---

## üöÄ –®–ê–ì 2: –ó–∞–ø—É—Å–∫ Xray

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ

# –°–±—Ä–æ—Å–∏—Ç—å failed —Å—Ç–∞—Ç—É—Å
systemctl reset-failed xray

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
systemctl start xray

# –ü–æ–¥–æ–∂–¥–∞—Ç—å
sleep 5

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
systemctl status xray --no-pager | head -10

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç
ss -tlnp | grep 39829

# –û–∂–∏–¥–∞–µ—Ç—Å—è:
# tcp   LISTEN 0 4096 0.0.0.0:39829 0.0.0.0:* users:(("xray",pid=...))
```

---

## üîå –®–ê–ì 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Routing –Ω–∞ –ö–ª–∏–µ–Ω—Ç–µ (v2rayN)

**–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ!** –ö–ª–∏–µ–Ω—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ `direct` –≤–º–µ—Å—Ç–æ `proxy`.

### –í v2rayN:

1. **–û—Ç–∫—Ä–æ–π—Ç–µ:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí Routing (–∏–ª–∏ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí Routing)

2. **–ù–∞–π–¥–∏—Ç–µ –∏ –£–î–ê–õ–ò–¢–ï** –ø—Ä–∞–≤–∏–ª–æ, –≥–¥–µ:
   - IP: `89.125.1.107` –∏–ª–∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —ç—Ç–æ—Ç IP
   - Outbound: `direct`

3. **–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞** (–ü–ï–†–í–´–ú!) –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ:
   ```json
   {
     "type": "field",
     "ip": ["89.125.1.107/32"],
     "outboundTag": "proxy"
   }
   ```

4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ** –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ v2rayN

5. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å** –∫ VPN (89.125.1.107:39829)

---

## üß™ –®–ê–ì 4: –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –°—Ç–∞—Ç—É—Å
systemctl status xray

# –ü–æ—Ä—Ç
ss -tlnp | grep 39829

# –õ–æ–≥–∏
journalctl -u xray -n 20 | tail -10
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ Xray: active (running)
- ‚úÖ –ü–æ—Ä—Ç 39829: LISTEN
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

### –ù–∞ –∫–ª–∏–µ–Ω—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
time curl -x socks5://127.0.0.1:10808 https://www.google.com

# –ü—Ä–æ–≤–µ—Ä–∫–∞ IP
curl -x socks5://127.0.0.1:10808 https://ifconfig.me
# –û–∂–∏–¥–∞–µ—Ç—Å—è: IP —Å–µ—Ä–≤–µ—Ä–∞ (89.125.1.107 –∏–ª–∏ –¥—Ä—É–≥–æ–π)
```

**–í –ª–æ–≥–∞—Ö v2rayN –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
from 127.0.0.1:PORT accepted tcp:89.125.1.107:39829 [socks -> proxy]
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
dial tcp 89.125.1.107:39829 using outbound/direct[direct]
```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç

**–°–µ—Ä–≤–µ—Ä:**
- [ ] x-ui –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [ ] –ü–æ—Ä—Ç—ã 39829, 62789 —Å–≤–æ–±–æ–¥–Ω—ã
- [ ] Xray –∑–∞–ø—É—â–µ–Ω —á–µ—Ä–µ–∑ systemd
- [ ] –ü–æ—Ä—Ç 39829 —Å–ª—É—à–∞–µ—Ç—Å—è
- [ ] Routing rule –¥–ª—è 89.125.1.107 ‚Üí proxy –µ—Å—Ç—å

**–ö–ª–∏–µ–Ω—Ç:**
- [ ] v2rayN –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [ ] –£–¥–∞–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ 89.125.1.107 ‚Üí direct
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ 89.125.1.107 ‚Üí proxy (–ø–µ—Ä–≤—ã–º!)
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ 89.125.1.107:39829
- [ ] –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç `[socks -> proxy]`
- [ ] curl —á–µ—Ä–µ–∑ VPN —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## ‚úÖ –ü–æ—Å–ª–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ VPN —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é (direct)
- ‚úÖ –û—Å—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —á–µ—Ä–µ–∑ VPN (proxy)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–∫–ª–∞–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ connection refused

---

## üîç –ï—Å–ª–∏ –ù–µ –†–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç –≤—Å–µ –µ—â–µ –∑–∞–Ω—è—Ç

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ps aux | grep xray
# –£–±–µ–π—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤—Ä—É—á–Ω—É—é
kill -9 <PID>

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ x-ui –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
systemctl disable x-ui
systemctl stop x-ui
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–ª–∏–µ–Ω—Ç –≤—Å–µ –µ—â–µ —á–µ—Ä–µ–∑ direct

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –ø—Ä–∞–≤–∏–ª –≤ v2rayN - –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è 89.125.1.107 –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–≤—ã–º
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç IP - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `89.125.1.107/32`
3. –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ v2rayN (–∑–∞–∫—Ä–æ–π—Ç–µ –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–Ω–æ–≤–æ)

---

## ‚úÖ –ò—Ç–æ–≥

**–°–µ—Ä–≤–µ—Ä:** ‚úÖ –ì–æ—Ç–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç—ã)
**–ö–ª–∏–µ–Ω—Ç:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å routing rules –≤ v2rayN

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ VPN –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç!** üöÄ

