# üîí SECURITY HOTFIX: –£–¥–∞–ª–µ–Ω–∏–µ SimplifiedNTRU Fallback

**–î–∞—Ç–∞:** 2025-01-27  
**–¢–∏–ø:** üî¥ **CRITICAL SECURITY FIX**  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0 - –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–´–ü–û–õ–ù–ï–ù–û**

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**SimplifiedNTRU** ‚Äî —É—Å—Ç–∞—Ä–µ–≤—à–∞—è –∏ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ—Å—Ç–∫–≤–∞–Ω—Ç–æ–≤–æ–π –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –ø–æ–º–µ—á–µ–Ω–Ω–∞—è –∫–∞–∫ DEPRECATED, –Ω–æ –≤—Å—ë –µ—â—ë –¥–æ—Å—Ç—É–ø–Ω–∞—è —á–µ—Ä–µ–∑ fallback –º–µ—Ö–∞–Ω–∏–∑–º –≤ `src/core/app.py`.

### –†–∏—Å–∫–∏:
- üî¥ **Harvest-now-decrypt-later –∞—Ç–∞–∫–∏** ‚Äî –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã –≤ –±—É–¥—É—â–µ–º
- üî¥ **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ NIST —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º** ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã (ML-KEM, ML-DSA)
- üî¥ **–õ–æ–∂–Ω–æ–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –£–¥–∞–ª—ë–Ω SimplifiedNTRU fallback

**–§–∞–π–ª:** `src/core/app.py` (—Å—Ç—Ä–æ–∫–∏ 26-65)

**–ë—ã–ª–æ:**
```python
except (ImportError, RuntimeError, AttributeError) as e:
    # Fallback to simplified PQC for staging
    try:
        from src.security.post_quantum import SimplifiedNTRU
        # ... fallback –∫–æ–¥ ...
```

**–°—Ç–∞–ª–æ:**
```python
except (ImportError, RuntimeError, AttributeError) as e:
    # In production, LibOQS is MANDATORY - fail fast
    if PRODUCTION_MODE:
        raise RuntimeError("LibOQS REQUIRED in production")
    # Only for dev/staging: minimal stub
```

### 2. LibOQS —Å–¥–µ–ª–∞–Ω –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –≤ production

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- ‚úÖ –í production —Ä–µ–∂–∏–º–µ —Å–∏—Å—Ç–µ–º–∞ **–Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è** –±–µ–∑ LibOQS
- ‚úÖ –Ø–≤–Ω–∞—è –æ—à–∏–±–∫–∞ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ –î–ª—è dev/staging –æ—Å—Ç–∞–≤–ª–µ–Ω –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π stub —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏

### 3. –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ LibOQS –≤ production
- ‚úÖ –Ø–≤–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ stub
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ: `pip install liboqs-python`

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ production —Ä–µ–∂–∏–º–µ:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
export X0TTA6BL4_PRODUCTION=true

# –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ liboqs
python -m src.core.app
# –û–∂–∏–¥–∞–µ—Ç—Å—è: RuntimeError —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ dev/staging:

```bash
# –ë–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m src.core.app
# –û–∂–∏–¥–∞–µ—Ç—Å—è: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –Ω–æ —Å–∏—Å—Ç–µ–º–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å–æ stub
```

---

## üì¶ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—é

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è production:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å liboqs-python
pip install liboqs-python

# –ò–ª–∏ –≤ requirements.txt
liboqs-python==0.14.1
```

### Dockerfile –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

```dockerfile
# –î–æ–±–∞–≤–∏—Ç—å –≤ Dockerfile
RUN pip install liboqs-python==0.14.1
```

---

## üîÑ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

### ‚ö†Ô∏è Breaking Changes:

1. **Production deployments** —Ç–µ–ø–µ—Ä—å **—Ç—Ä–µ–±—É—é—Ç** liboqs-python
2. **SimplifiedNTRU –±–æ–ª—å—à–µ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω** –∫–∞–∫ fallback
3. –°–∏—Å—Ç–µ–º–∞ **–Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è** –≤ production –±–µ–∑ LibOQS

### –ú–∏–≥—Ä–∞—Ü–∏—è:

–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö deployments:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `liboqs-python`
2. –û–±–Ω–æ–≤–∏—Ç—å `requirements.txt`
3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Docker –æ–±—Ä–∞–∑—ã
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ staging –ø–µ—Ä–µ–¥ production

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –î–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚ö†Ô∏è SimplifiedNTRU –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ fallback
- ‚ö†Ô∏è Production –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–π –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π
- ‚ö†Ô∏è –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç harvest-now-decrypt-later

### –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- ‚úÖ SimplifiedNTRU –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—ë–Ω –∏–∑ fallback
- ‚úÖ Production —Ç—Ä–µ–±—É–µ—Ç LibOQS (NIST-approved)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–≤–∞–Ω—Ç–æ–≤—ã—Ö –∞—Ç–∞–∫ (ML-KEM-768 + ML-DSA-65)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** –£–¥–∞–ª–µ–Ω–∏–µ SimplifiedNTRU fallback
2. ‚è≥ **–í –ø—Ä–æ—Ü–µ—Å—Å–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Dockerfile –∏ CI/CD
3. ‚è≥ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ staging
4. ‚è≥ **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ:** –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ production

---

## üìù Changelog

### [SECURITY] 2025-01-27
- **CRITICAL:** –£–¥–∞–ª—ë–Ω SimplifiedNTRU fallback –∏–∑ `app.py`
- **BREAKING:** LibOQS —Ç–µ–ø–µ—Ä—å –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ production
- **IMPROVEMENT:** –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **DOCS:** –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ liboqs-python

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] SimplifiedNTRU fallback —É–¥–∞–ª—ë–Ω
- [x] LibOQS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –≤ production
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–æ
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [ ] Dockerfile –æ–±–Ω–æ–≤–ª—ë–Ω (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)
- [ ] CI/CD –æ–±–Ω–æ–≤–ª—ë–Ω (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ staging (—Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥)

---

**–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å:** AI Assistant (Auto)  
**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:** –¢—Ä–µ–±—É–µ—Ç—Å—è code review  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ merge

