{{/*
MaaS Secrets
*/}}
{{- if .Values.secrets.create }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "maas.fullname" . }}-secrets
  labels:
    {{- include "maas.labels" . | nindent 4 }}
type: Opaque
data:
  # Database connection string
  database-url: {{ include "maas.databaseUrl" . | b64enc | quote }}
  
  # Redis connection string
  redis-url: {{ include "maas.redisUrl" . | b64enc | quote }}
  
  {{- if .Values.stripe.enabled }}
  # Stripe API keys
  stripe-secret-key: {{ .Values.stripe.secretKey | b64enc | quote }}
  stripe-webhook-secret: {{ .Values.stripe.webhookSecret | b64enc | quote }}
  {{- end }}
  
  {{- if .Values.postgresql.enabled }}
  # PostgreSQL credentials
  postgres-password: {{ .Values.postgresql.auth.postgresPassword | b64enc | quote }}
  maas-password: {{ .Values.postgresql.auth.password | b64enc | quote }}
  {{- end }}
  
  {{- if .Values.redis.enabled }}
  # Redis password
  redis-password: {{ .Values.redis.auth.password | b64enc | quote }}
  {{- end }}
{{- end }}
