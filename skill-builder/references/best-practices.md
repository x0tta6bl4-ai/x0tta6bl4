# Лучшие практики создания скиллов

Собрано из официальной документации Anthropic и сообщества (2025-2026).

## Принципы написания инструкций

### Concise is Key

Контекстное окно — общий ресурс. Скиллы делят его с системным промптом, историей разговора и запросом пользователя.

**Базовое предположение:** Claude уже очень умный. Добавлять только контекст, которого Claude не имеет.

Проверять каждую часть информации:
- "Действительно ли Claude нужно это объяснение?"
- "Оправдывает ли этот параграф затраты токенов?"

**Предпочитать краткие примеры вместо многословных объяснений.**

### Degrees of Freedom

Соответствовать уровень специфичности хрупкости задачи:

**High freedom (текстовые инструкции):**
- Множество подходов валидны
- Решения зависят от контекста

**Medium freedom (псевдокод или скрипты с параметрами):**
- Есть предпочтительный паттерн
- Некоторые вариации допустимы

**Low freedom (конкретные скрипты):**
- Операции хрупкие и подверженные ошибкам
- Консистентность критична
- Нужна конкретная последовательность

Аналогия: узкий мост над обрывом = низкая свобода (точные перила). Открытое поле = высокая свобода (общее направление).

## Написание description

### Правила

1. Всегда третье лицо — "Processes Excel files", не "I can help you"
2. Конкретно + триггерные фразы
3. Ключевые термины для обнаружения
4. Синонимы которые может сказать пользователь

### Примеры

```yaml
# ХОРОШО - конкретно, включает триггеры
description: >-
  Analyze Excel spreadsheets, create pivot tables, generate charts.
  Use when analyzing Excel files, spreadsheets, tabular data, or .xlsx files.

# ХОРОШО - действие + контекст
description: >-
  Generate descriptive commit messages by analyzing git diffs.
  Use when user asks for help writing commit messages or reviewing staged changes.
```

## Паттерны workflow

### Checklist Pattern (сложные многошаговые)

```markdown
## Workflow заполнения форм
Копировать и отслеживать прогресс:
- [ ] Шаг 1: Загрузить данные
- [ ] Шаг 2: Валидировать формат
- [ ] Шаг 3: Обработать
- [ ] Шаг 4: Сохранить результат
```

### Validation Loop Pattern

```markdown
## Цикл валидации
1. Внести изменения в документ
2. **Валидировать немедленно**: `python scripts/validate.py output/`
3. Если валидация провалилась:
   - Просмотреть сообщение об ошибке
   - Исправить проблемы
   - Запустить валидацию снова
4. **Продолжать только когда валидация прошла**
```

### Decision Tree Pattern

```markdown
## Модификация документа
1. Определить тип:
   - **Создание нового?** → Следовать "Creation workflow"
   - **Редактирование существующего?** → Следовать "Editing workflow"
2. Creation workflow:
   - Использовать библиотеку
   - Строить с нуля
3. Editing workflow:
   - Распаковать существующий документ
   - Модифицировать напрямую
```

## Output Templates

```markdown
## Структура отчёта
ВСЕГДА использовать этот шаблон:

# [Заголовок анализа]

## Executive summary
[Один параграф обзора]

## Ключевые находки
- Находка 1 с данными
- Находка 2 с данными

## Рекомендации
1. Рекомендация 1
2. Рекомендация 2
```

## Progressive Disclosure в действии

### Паттерн 1: High-level guide с references

```markdown
# PDF Processing

## Quick start
Извлечь текст с pdfplumber:
[пример кода]

## Advanced features
- **Form filling**: See [FORMS.md](references/FORMS.md) для полного гайда
- **API reference**: See [REFERENCE.md](references/REFERENCE.md) для всех методов
```

Claude загружает FORMS.md или REFERENCE.md только когда нужно.

### Паттерн 2: Выбор фреймворка

```markdown
# Frontend Builder

## Framework selection
1. Спросить пользователя о предпочтениях
2. На основе ответа загрузить:
   - React: `references/react-patterns.md`
   - Vue: `references/vue-patterns.md`
   - Vanilla: `references/vanilla-patterns.md`
```

## Использование скриптов

### Когда включать скрипты

- Один и тот же код переписывается многократно
- Нужна детерминистичная надёжность
- Сложные вычисления или валидация
- Batch processing

### Пример структуры

```
skill-name/
├── SKILL.md
└── scripts/
    ├── validate.py      # Валидация выходных данных
    ├── process.py       # Обработка данных
    └── format.sh        # Форматирование
```

### В SKILL.md ссылаться так:

```markdown
## Валидация
Запустить `scripts/validate.py output/` для проверки:
- Корректность формата
- Отсутствие ошибок
- Соответствие требованиям
```

## Использование references

### Когда включать references

- Документация которую Claude должен референсить
- Database schemas
- API документация
- Доменные знания
- Детальные гайды по workflow

### Рекомендации

- Если файлы > 10k слов, включать grep patterns
- Информация должна быть ИЛИ в SKILL.md ИЛИ в references, не в обоих
- Предпочитать references для детальной информации

## Использование assets

### Когда включать assets

- Файлы используемые в финальном output
- Не загружаются в контекст, используются в результатах

### Примеры

- `assets/logo.png` - бренд ассеты
- `assets/template.pptx` - шаблоны презентаций
- `assets/frontend-template/` - boilerplate код
- `assets/font.ttf` - шрифты

## Anti-patterns

### Не делать

1. **README.md в скилле** — вся документация в SKILL.md или references/
2. **Избыточные объяснения** — Claude уже знает базовые вещи
3. **Дублирование контента** — информация в одном месте
4. **Слишком общий description** — не триггерится правильно
5. **XML теги в frontmatter** — безопасность
6. **Заглавные буквы и пробелы в name** — только kebab-case

### Делать

1. **Конкретные примеры** вместо абстрактных объяснений
2. **Пошаговые инструкции** в императивной форме
3. **Триггерные фразы** в description
4. **Валидация на каждом шаге** для критичных операций
5. **Progressive disclosure** — детали в отдельных файлах

## Тестирование триггеров

```yaml
# Должно триггерить:
- "Help me set up a new ProjectHub workspace"
- "I need to create a project in ProjectHub"  
- "Initialize a ProjectHub project for Q4 planning"

# НЕ должно триггерить:
- "What's the weather in San Francisco?"
- "Help me write Python code"
- "Create a spreadsheet"
```

## Итерация

### Сигналы undertriggering:
- Скилл не загружается когда должен
- Пользователи вручную включают его
- Вопросы поддержки "когда использовать"

**Решение:** Добавить больше деталей и нюансов в description

### Сигналы overtriggering:
- Скилл загружается для нерелевантных запросов
- Пользователи отключают его
- Путаница с назначением

**Решение:** Добавить негативные триггеры, быть более специфичным

### Проблемы выполнения:
- Непоследовательные результаты
- Ошибки API вызовов
- Нужны коррекции пользователя

**Решение:** Улучшить инструкции, добавить обработку ошибок
