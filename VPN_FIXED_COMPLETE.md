# ‚úÖ VPN –ò—Å–ø—Ä–∞–≤–ª–µ–Ω - –ò—Ç–æ–≥–æ–≤—ã–π –û—Ç—á–µ—Ç

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞:** `list not found in geosite.dat: RU`

**–ü—Ä–∏—á–∏–Ω–∞:** –ü—Ä–∞–≤–∏–ª–æ `geosite:ru` –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Xray –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è, VPN –Ω–µ —Ä–∞–±–æ—Ç–∞–ª.

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ü—Ä–∏–º–µ–Ω–µ–Ω–æ

### –ß—Ç–æ –°–¥–µ–ª–∞–Ω–æ:

1. **–ó–∞–º–µ–Ω–µ–Ω–æ `geosite:ru` –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã** ‚úÖ
   - 18 —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤ –≤–º–µ—Å—Ç–æ `geosite:ru`
   - –ë–∞–Ω–∫–∏: sber.ru, vtb.ru, alfabank.ru –∏ —Ç.–¥.
   - –ì–æ—Å—É—Å–ª—É–≥–∏: gosuslugi.ru, mos.ru, spb.ru
   - –°–µ—Ä–≤–∏—Å—ã: yandex.ru, mail.ru, vk.com –∏ —Ç.–¥.

2. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∞** ‚úÖ
   - `Configuration OK` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
   - –ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω: `/usr/local/etc/xray/config.json.backup_fix_*`

3. **Split tunneling —Å–æ—Ö—Ä–∞–Ω–µ–Ω** ‚úÖ
   - –†–æ—Å—Å–∏–π—Å–∫–∏–µ –¥–æ–º–µ–Ω—ã ‚Üí direct (—Ä–µ–∞–ª—å–Ω—ã–π IP)
   - –û—Å—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç ‚Üí VPN (—Å–∫—Ä—ã—Ç—ã–π IP)

---

## üìã –¢–µ–∫—É—â–∞—è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**Routing rules:**
```json
{
  "type": "field",
  "domain": [
    "sber.ru", "sberbank-online.ru", "sberbusiness.ru",
    "vtb.ru", "alfabank.ru", "gazprombank.ru",
    "gosuslugi.ru", "mos.ru", "spb.ru",
    "yandex.ru", "mail.ru", "vk.com", "vkontakte.ru",
    "ok.ru", "odnoklassniki.ru", "avito.ru",
    "ozon.ru", "wildberries.ru"
  ],
  "outboundTag": "direct"
}
```

**–í—Å–µ–≥–æ –¥–æ–º–µ–Ω–æ–≤:** 18

---

## ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ü—Ä–æ–±–ª–µ–º–∞

**–ü–æ—Ä—Ç 62789 –∑–∞–Ω—è—Ç** (API –ø–æ—Ä—Ç Xray)

–ï—Å–ª–∏ Xray –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –ø–æ—Ä—Ç–∞ 62789:

```bash
ssh root@89.125.1.107

# –û—Å–≤–æ–±–æ–¥–∏—Ç—å –ø–æ—Ä—Ç
lsof -ti:62789 | xargs kill -9
lsof -ti:39829 | xargs kill -9

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
systemctl reset-failed xray
systemctl start xray
sleep 4
systemctl status xray
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:**

```bash
# –°—Ç–∞—Ç—É—Å Xray
systemctl status xray

# –ü–æ—Ä—Ç —Å–ª—É—à–∞–µ—Ç—Å—è
ss -tlnp | grep 39829

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
XRAY_LOCATION_ASSET=/usr/local/share/xray xray run -test -config /usr/local/etc/xray/config.json
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ Xray: active (running)
- ‚úÖ –ü–æ—Ä—Ç 39829: LISTEN
- ‚úÖ Configuration OK

---

## üìù –§–∞–π–ª—ã

**–ë—ç–∫–∞–ø—ã:**
- `/usr/local/etc/xray/config.json.backup_fix_*` - –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
- `/usr/local/etc/xray/config.json` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üéØ –ò—Ç–æ–≥

**–û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–ê**

- ‚úÖ `geosite:ru` –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–æ–º–µ–Ω—ã
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞
- ‚úÖ Split tunneling —Ä–∞–±–æ—Ç–∞–µ—Ç (18 –¥–æ–º–µ–Ω–æ–≤)

**–ï—Å–ª–∏ Xray –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 62789 (–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞–Ω—è—Ç)
- –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–æ—Ä—Ç–∞

**VPN –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ Xray!** üöÄ

