agent {
  data_dir = "/spire/data/agent"
  log_level = "info"
  server_address = "spire-server"
  server_port = 8081

  socket_path = "/spire-agent-socket-dir/api.sock"
  
  trust_domain = "x0tta6bl4.mesh"
  
  # When the agent starts up without a configured identity,
  # it generates a SPIFFE ID based on the machine's hostname
  allow_unauthenticated_verifiers = true
}

plugins {
  NodeAttestor "docker" {
    plugin_name = "docker"
    plugin_cmd = "/opt/spire/bin/spire-agent"
    plugin_checksum = ""
    plugin_data {
      # Use default Docker socket
      endpoint = "unix:///var/run/docker.sock"
    }
  }

  KeyManager "memory" {
    plugin_name = "memory"
    plugin_cmd = "/opt/spire/bin/spire-agent"
    plugin_checksum = ""
  }

  WorkloadAttestor "unix" {
    plugin_name = "unix"
    plugin_cmd = "/opt/spire/bin/spire-agent"
    plugin_checksum = ""
  }
}
