# üîß –û—Ç—á—ë—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ ValidationPanel (25 —è–Ω–≤–∞—Ä—è 2026)

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–¥—É–ª–µ–π ValidationPanel –ø–æ–∫–∞–∑—ã–≤–∞–ª **"–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã (3-4)"** –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –¥–µ–º–æ-–ø–∞–Ω–µ–ª—è–º–∏.

## –ê–Ω–∞–ª–∏–∑
–ë—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö:

### 1. **CollisionValidator - –ù–µ–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è 3D bounding box**
- **–§–∞–π–ª**: `services/CollisionValidator.ts`
- **–ü—Ä–æ–±–ª–µ–º–∞**: –í–∞–ª–∏–¥–∞—Ç–æ—Ä –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª `rotation` –ø–∞—Ä–∞–º–µ—Ç—Ä –ø–∞–Ω–µ–ª–µ–π –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ –≤ 3D –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
- **–°–ª–µ–¥—Å—Ç–≤–∏–µ**: –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–∏ –ø–∞–Ω–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ

### 2. **INITIAL_PANELS - –ù–µ–≤–µ—Ä–Ω—ã–µ –æ—Å–∏ rotation**
- **–§–∞–π–ª**: `store/projectStore.ts`
- **–ü—Ä–æ–±–ª–µ–º–∞**: 
  - –ü–æ–ª–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `rotation: Axis.Y`, —á—Ç–æ –ø–µ—Ä–µ—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑–º–µ—Ä—ã –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
  - –î–µ–º–æ-–ø–∞–Ω–µ–ª–∏ –∏–º–µ–ª–∏ —Å—Ç—Ä–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –≤ 3D –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CollisionValidator
**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `services/CollisionValidator.ts`**:

```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è bounding box —Å —É—á—ë—Ç–æ–º rotation
private static getBoundingBox(panel: Panel): BoundingBox {
  let dimX = 0, dimY = 0, dimZ = 0;
  
  if (panel.rotation === Axis.X) {
    dimX = panel.depth;   // depth –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –æ—Å–∏ X
    dimY = panel.height;  // height –Ω–∞ –æ—Å–∏ Y
    dimZ = panel.width;   // width –Ω–∞ –æ—Å–∏ Z
  } else if (panel.rotation === Axis.Y) {
    dimX = panel.depth;
    dimY = panel.height;
    dimZ = panel.width;
  } else {
    // Axis.Z (–Ω–µ—Ç –ø–æ–≤–æ—Ä–æ—Ç–∞) - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
    dimX = panel.width;
    dimY = panel.height;
    dimZ = panel.depth;
  }
  
  return {
    minX: panel.x,
    maxX: panel.x + dimX,
    minY: panel.y,
    maxY: panel.y + dimY,
    minZ: panel.z,
    maxZ: panel.z + dimZ
  };
}
```

**–£–ª—É—á—à–µ–Ω–∏—è**:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `tolerance = 0.5mm` –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–µ–≤–∏–¥–∏–º—ã–µ –ø–∞–Ω–µ–ª–∏ (`if (!p1.visible || !p2.visible)`)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ü–µ–Ω—Ç—Ä–æ–≤ –ø–∞–Ω–µ–ª–µ–π –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏

### –®–∞–≥ 2: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ INITIAL_PANELS
**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `store/projectStore.ts`**:

| –ü–∞–Ω–µ–ª—å | –î–æ | –ü–æ—Å–ª–µ | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|--------|-----|--------|-----------|
| p-3 (–í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–∫–∞) | `rotation: Axis.Y` | `rotation: Axis.Z` | ‚úÖ –ù–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è |
| p-4 (–ù–∏–∂–Ω—è—è –ø–æ–ª–∫–∞) | `rotation: Axis.Y` | `rotation: Axis.Z` | ‚úÖ –ù–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è |

**–ù–æ–≤–∞—è –≥–µ–æ–º–µ—Ç—Ä–∏—è —à–∫–∞—Ñ–∞**:
```
–®–∫–∞—Ñ: 1800–º–º (W) √ó 2000–º–º (H) √ó 650–º–º (D)

p-1: –ë–æ–∫–æ–≤–∏–Ω–∞ –ª–µ–≤–∞—è      (0, 0, 0) ‚Üí 16√ó2000√ó650  [Axis.Z]
p-2: –ë–æ–∫–æ–≤–∏–Ω–∞ –ø—Ä–∞–≤–∞—è     (1784, 0, 0) ‚Üí 16√ó2000√ó650  [Axis.Z]
p-3: –í–µ—Ä—Ö–Ω—è—è –ø–æ–ª–∫–∞       (16, 1984, 32) ‚Üí 1768√ó16√ó600  [Axis.Z]
p-4: –ù–∏–∂–Ω—è—è –ø–æ–ª–∫–∞        (16, 1000, 32) ‚Üí 1768√ó16√ó600  [Axis.Z]

‚úì –ü–æ–ª–∫–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –º–µ–∂–¥—É –±–æ–∫–æ–≤–∏–Ω–∞–º–∏
‚úì –ù–µ—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –≤ 3D –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### ‚úÖ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

1. **ValidationPanel —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: ‚úì –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ

2. **CollisionValidator** –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
   - –£—á–∏—Ç—ã–≤–∞–µ—Ç `rotation` –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ —Ä–∞–∑–º–µ—Ä–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
   - –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –Ω–µ–≤–∏–¥–∏–º—ã–µ –ø–∞–Ω–µ–ª–∏

3. **HardwarePositionsValidator** –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ System 32 —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
   - –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∏–∞–º–µ—Ç—Ä—ã —Ñ—É—Ä–Ω–∏—Ç—É—Ä—ã

4. **–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ** —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã:
   - –í—Å–µ –ø–∞–Ω–µ–ª–∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≥–µ–æ–º–µ—Ç—Ä–∏—é
   - –í—Å–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
   - UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á–∏—Å—Ç—ã–π —Å—Ç–∞—Ç—É—Å

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞:

```typescript
// –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π
const overlappingPanels = [
  // –ü–∞–Ω–µ–ª—å A: x[0..100], y[0..100], z[0..10]
  // –ü–∞–Ω–µ–ª—å B: x[50..150], y[50..150], z[0..10]
  // ‚ùå –ü–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è
];

// –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–∞—Å–∞–Ω–∏–µ –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ–º
const touchingPanels = [
  // –ü–∞–Ω–µ–ª—å A: x[0..100], y[0..100], z[0..10]
  // –ü–∞–Ω–µ–ª—å B: x[100..200], y[0..100], z[0..10]  
  // ‚úì –¢–æ–ª—å–∫–æ –∫–∞—Å–∞—é—Ç—Å—è –≥—Ä–∞–Ω–∏—Ü
];
```

## –ú–æ–¥—É–ª–∏ Variant C (–§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)

| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | –§–∞–π–ª—ã |
|--------|--------|-------|
| **TechnicalDrawing** | ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω | `components/TechnicalDrawing.tsx` (287 —Å—Ç—Ä–æ–∫) |
| **SheetNesting** | ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω | `components/NestingView.tsx` + Web Worker |
| **CollisionValidator** | ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω | `services/CollisionValidator.ts` (120 —Å—Ç—Ä–æ–∫) |
| **HardwarePositions** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | `services/HardwarePositions.ts` (120 —Å—Ç—Ä–æ–∫) |
| **ValidationPanel** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | `components/ValidationPanel.tsx` (95 —Å—Ç—Ä–æ–∫) |

## –ö–æ–º–º–∏—Ç

```bash
git commit -m "fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CollisionValidator –∏ INITIAL_PANELS –≥–µ–æ–º–µ—Ç—Ä–∏–∏

- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è getBoundingBox() —Å —É—á—ë—Ç–æ–º rotation –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å 0.5mm –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—Å–∏ rotation –¥–ª—è –ø–æ–ª–æ–∫ (Axis.Y -> Axis.Z)
- –î–µ–º–æ-–ø–∞–Ω–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è –≤ 3D –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ
- ValidationPanel –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç '‚úì –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ'

REFS: VARIANT_C_VALIDATION_FIX"
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

### 1. –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
```typescript
interface CollisionResult {
  panelA: string;
  panelB: string;
  distance: number;
  overlapVolume?: number;  // –û–±—ä—ë–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
  overlapPercentage?: number;  // % –æ—Ç –ø–∞–Ω–µ–ª–∏ A
}
```

### 2. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π –≤ 3D
```typescript
// –û—Ç–º–µ—Ç–∏—Ç—å –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–∏–µ—Å—è –ø–∞–Ω–µ–ª–∏ –∫—Ä–∞—Å–Ω—ã–º –≤ Scene3D
// –ü–æ–∫–∞–∑–∞—Ç—å 3D bounding box –≤ debug —Ä–µ–∂–∏–º–µ
```

### 3. –ü—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ —Å–ª–æ—è–º
```typescript
// –†–∞–∑–Ω—ã–µ —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–ª–æ—ë–≤:
// - 'body' (–∫–æ—Ä–ø—É—Å): —Å—Ç—Ä–æ–≥–∏–µ
// - 'hardware': –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
// - 'facade': –º—è–≥–∫–∏–µ
```

---

**–î–∞—Ç–∞**: 25 —è–Ω–≤–∞—Ä—è 2026  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û  
**–í—Ä–µ–º—è –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: ~15 –º–∏–Ω—É—Ç
