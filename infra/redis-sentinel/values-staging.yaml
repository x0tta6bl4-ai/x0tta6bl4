# Redis Sentinel Helm Values for Staging
# Minimal resources, single replica for cost efficiency

architecture: replication

auth:
  enabled: true
  existingSecret: "redis-secret"
  existingSecretPasswordKey: "redis-password"

master:
  count: 1
  persistence:
    enabled: true
    size: 2Gi
    storageClass: "standard"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi
  podSecurityContext:
    enabled: true
    fsGroup: 1001
    runAsUser: 1001
  containerSecurityContext:
    enabled: true
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL

replica:
  replicaCount: 1
  persistence:
    enabled: true
    size: 2Gi
    storageClass: "standard"
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 250m
      memory: 256Mi
  podSecurityContext:
    enabled: true
    fsGroup: 1001
    runAsUser: 1001
  containerSecurityContext:
    enabled: true
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    capabilities:
      drop:
        - ALL

sentinel:
  enabled: true
  masterSet: "mymaster"
  quorum: 1
  replicas: 1
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 100m
      memory: 128Mi
  downAfterMilliseconds: 5000
  failoverTimeout: 60000
  parallelSyncs: 1
  service:
    type: ClusterIP
    ports:
      sentinel: 26379

networkPolicy:
  enabled: false

metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    namespace: monitoring
    labels:
      release: prometheus

pdb:
  create: false

serviceAccount:
  create: true
  automountServiceAccountToken: false

commonLabels:
  app.kubernetes.io/part-of: x0tta6bl4
  environment: staging
