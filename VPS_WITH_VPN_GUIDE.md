# üöÄ VPS DEPLOYMENT –° –°–£–©–ï–°–¢–í–£–Æ–©–ò–ú VPN

**–í–∞—Ä–∏–∞–Ω—Ç:** A - Micro Launch –Ω–∞ VPS —Å VPN  
**–í—Ä–µ–º—è:** 2-3 —á–∞—Å–∞  
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π VPN

---

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –°–û–í–ú–ï–°–¢–ù–ê–Ø –†–ê–ë–û–¢–ê –° VPN

–ù–∞ —Ç–≤–æ–µ–º VPS —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç VPN (Xray/3X-UI). x0tta6bl4 –±—É–¥–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ**, –Ω–µ –º–µ—à–∞—è VPN.

### –ü–æ—Ä—Ç—ã

**VPN –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
- –ü–æ—Ä—Ç 443 (HTTPS –¥–ª—è VPN)
- –ü–æ—Ä—Ç 628 (3X-UI –ø–∞–Ω–µ–ª—å)
- –î—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã –¥–ª—è VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**x0tta6bl4 –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Ä—Ç 8080 (Application) ‚úÖ
- –ü–æ—Ä—Ç 9090 (Metrics) ‚úÖ
- –ü–æ—Ä—Ç 80 (Nginx reverse proxy) ‚úÖ

**–ö–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–µ—Ç!** ‚úÖ

---

## üöÄ –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π deployment

```bash
cd /mnt/AC74CC2974CBF3DC

# –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç VPN)
./scripts/vps_deploy_with_vpn.sh YOUR_VPS_IP [USER] [DOMAIN]

# –ü—Ä–∏–º–µ—Ä –¥–ª—è —Ç–≤–æ–µ–≥–æ VPS:
./scripts/vps_deploy_with_vpn.sh 89.125.1.107 root
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç Docker image –ª–æ–∫–∞–ª—å–Ω–æ
2. ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç –Ω–∞ VPS
3. ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
4. ‚úÖ –ó–∞–ø—É—Å–∫–∞–µ—Ç x0tta6bl4 –Ω–∞ –ø–æ—Ä—Ç–∞—Ö 8080/9090
5. ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Nginx –¥–ª—è x0tta6bl4
6. ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è–µ—Ç VPN –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π**

---

## üìã –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         VPS (89.125.1.107)              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                         ‚îÇ
‚îÇ  VPN (Xray/3X-UI):                      ‚îÇ
‚îÇ  ‚îú‚îÄ Port 443 (VPN connections)          ‚îÇ
‚îÇ  ‚îú‚îÄ Port 628 (3X-UI panel)              ‚îÇ
‚îÇ  ‚îî‚îÄ Other VPN ports                     ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  x0tta6bl4:                             ‚îÇ
‚îÇ  ‚îú‚îÄ Port 8080 (Application)            ‚îÇ
‚îÇ  ‚îú‚îÄ Port 9090 (Metrics)                ‚îÇ
‚îÇ  ‚îî‚îÄ Port 80 (Nginx ‚Üí 8080)             ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ  Nginx:                                  ‚îÇ
‚îÇ  ‚îú‚îÄ / ‚Üí x0tta6bl4 (port 8080)          ‚îÇ
‚îÇ  ‚îî‚îÄ VPN panel (unchanged)              ‚îÇ
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîß –ù–ê–°–¢–†–û–ô–ö–ê NGINX

Nginx –±—É–¥–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–∞–∫, —á—Ç–æ–±—ã:
- ‚úÖ x0tta6bl4 –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `/` (–∏–ª–∏ —á–µ—Ä–µ–∑ –ø–æ–¥–¥–æ–º–µ–Ω)
- ‚úÖ VPN –ø–∞–Ω–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É 628
- ‚úÖ VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–æ–º–µ–Ω–µ/IP

```nginx
# x0tta6bl4 –Ω–∞ –≥–ª–∞–≤–Ω–æ–º –¥–æ–º–µ–Ω–µ
server {
    listen 80;
    server_name 89.125.1.107;

    location / {
        proxy_pass http://localhost:8080;
    }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞ –ø–æ–¥–¥–æ–º–µ–Ω–µ (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ–º–µ–Ω)

```nginx
# x0tta6bl4 –Ω–∞ –ø–æ–¥–¥–æ–º–µ–Ω–µ
server {
    listen 80;
    server_name app.yourdomain.com;

    location / {
        proxy_pass http://localhost:8080;
    }
}

# VPN –ø–∞–Ω–µ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –¥–æ–º–µ–Ω–µ
server {
    listen 80;
    server_name yourdomain.com;

    location / {
        proxy_pass http://localhost:628;
    }
}
```

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê

### –ü–æ—Å–ª–µ deployment:

```bash
# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ VPN —Ä–∞–±–æ—Ç–∞–µ—Ç
curl -I http://89.125.1.107:628

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ x0tta6bl4 —Ä–∞–±–æ—Ç–∞–µ—Ç
curl http://89.125.1.107/health
curl http://89.125.1.107:8080/health

# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
ssh root@89.125.1.107 'docker ps'
ssh root@89.125.1.107 'systemctl status xray'
```

---

## üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï

### –û–±–Ω–æ–≤–∏—Ç—å x0tta6bl4 (VPN –Ω–µ –∑–∞—Ç—Ä–æ–Ω–µ—Ç—Å—è):

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
docker build -t x0tta6bl4-app:staging -f Dockerfile.app .
docker save x0tta6bl4-app:staging | gzip > x0tta6bl4-app-staging.tar.gz
scp x0tta6bl4-app-staging.tar.gz root@89.125.1.107:/root/

# –ù–∞ VPS
ssh root@89.125.1.107
docker load < /root/x0tta6bl4-app-staging.tar.gz
cd /root
docker-compose -f docker-compose-x0tta6bl4.yml down
docker-compose -f docker-compose-x0tta6bl4.yml up -d
```

---

## üö® TROUBLESHOOTING

### x0tta6bl4 –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏
docker logs x0tta6bl4-production

# –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç—ã
netstat -tulpn | grep 8080
```

### VPN –ø–µ—Ä–µ—Å—Ç–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å

```bash
# –ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç—É—Å VPN
systemctl status xray

# –ü—Ä–æ–≤–µ—Ä—å –ø–æ—Ä—Ç—ã VPN
netstat -tulpn | grep 443
```

### Nginx –∫–æ–Ω—Ñ–ª–∏–∫—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –ü—Ä–æ–≤–µ—Ä—å –∫–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã —Å–ª—É—à–∞—é—Ç –ø–æ—Ä—Ç 80
netstat -tulpn | grep :80
```

---

## üìä –†–ï–°–£–†–°–´

### –¢–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (–∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞):
```
CPU: 19.11% (2 Cores)
RAM: 42.04% (1.61 GB / 3.82 GB)
Disk: 59.7% (23.46 GB / 39.29 GB)
```

### –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è x0tta6bl4:
```
CPU: ~25-30% (–¥–æ–±–∞–≤–∏—Ç—Å—è ~5-10%)
RAM: ~50-55% (–¥–æ–±–∞–≤–∏—Ç—Å—è ~200-300MB)
Disk: ~60% (–¥–æ–±–∞–≤–∏—Ç—Å—è ~500MB-1GB)
```

**–†–µ—Å—É—Ä—Å–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ!** ‚úÖ

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**
   - –°–ª–µ–¥–∏ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–µ—Å—É—Ä—Å–æ–≤
   - VPN –∏ x0tta6bl4 –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ

2. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**
   - –ï—Å–ª–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å x0tta6bl4
   - VPN –≤–∞–∂–Ω–µ–µ –¥–ª—è –¥—Ä—É–∑–µ–π, x0tta6bl4 –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤, –º–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å x0tta6bl4 –Ω–∞ AWS
   - VPN –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –Ω–∞ VPS

---

## üí∞ –°–¢–û–ò–ú–û–°–¢–¨

```
VPS:           –£–∂–µ –æ–ø–ª–∞—á–µ–Ω (–¥–ª—è VPN)
x0tta6bl4:     +0 (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ —Ä–µ—Å—É—Ä—Å—ã)
Domain:        –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

TOTAL:         $0 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
```

---

**–î–∞—Ç–∞:** 27 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **READY TO DEPLOY (VPN PRESERVED)**

